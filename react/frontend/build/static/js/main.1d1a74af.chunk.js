(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){},25:function(e,t,a){e.exports=a(38)},38:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(22),r=a.n(i),o=a(1),l=a(2),c=a(3),u=a(5),h=a(4),m=a(6),p=a(8),d=(a(20),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e;return console.log("Navigation Bar Rendered."),e=this.props.loggedIn?s.a.createElement(b,{className:"NavLink",to:"/Logout"},"Logout"):s.a.createElement(b,{className:"NavLink",to:"/Login"},"Login"),s.a.createElement("div",{className:"Nav"},s.a.createElement("div",{className:"EmptyFlex",style:{flexGrow:"3"}}),s.a.createElement(b,{className:"Title",to:"/"},"ArrayOutOfBounds"),s.a.createElement(g,{className:"SearchBar",action:"/search"}),s.a.createElement("div",{className:"EmptyFlex",style:{flexGrow:"2"}}),s.a.createElement(b,{className:"NavLink",to:"/"},"Home"),s.a.createElement(b,{className:"NavLink",to:"/Questions"},"Questions"),s.a.createElement(b,{className:"NavLink",to:"/Search"},"Search"),s.a.createElement(b,{className:"NavLink",to:"/Media"},"Media"),s.a.createElement(b,{className:"NavLink",to:"/Users"},"Users"),e,s.a.createElement("div",{className:"EmptyFlex",style:{flexGrow:"3"}}))}}]),t}(s.a.Component)),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.search=a.search.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"search",value:function(e){console.log("Search"),e.preventDefault()}},{key:"render",value:function(){return s.a.createElement("form",{className:"SearchForm",onSubmit:this.search},s.a.createElement("input",{className:this.props.className,type:"search",value:this.state.value,onChange:this.handleChange}),s.a.createElement("input",{className:"button SearchButton",type:"submit",value:"Search"}))}}]),t}(s.a.Component),b=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(p.b,{style:{textDecoration:"none"},className:this.props.className,to:this.props.to},this.props.children)}}]),t}(s.a.Component),f=(s.a.Component,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).postQuestion=a.postQuestion.bind(Object(o.a)(Object(o.a)(a))),a.state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"postQuestion",value:function(){console.log("Posting question."),this.props.history.push("/Home")}},{key:"componentDidMount",value:function(){console.log("DID MOUNT IN HOME")}},{key:"render",value:function(){var e=!1;return null!=this.props.location.state&&(e=this.props.location.state.skipFirstRender,this.props.location.state.skipFirstRender=!1,this.props.location.state=null),e?s.a.createElement("div",null):(this.props.loggedIn?s.a.createElement("p",null,"Logged In"):s.a.createElement("p",null,"Logged Out"),s.a.createElement("div",null,s.a.createElement("h1",null,"Welcome to my StackOverflow clone called ArrayOutOfBounds!")))}}]),t}(s.a.Component)),E=a(13),v=a(9),O=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(p.b,{className:this.props.className,to:this.props.to},this.props.id))}}]),t}(s.a.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={username:"",email:"",password:"",notification:""},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.createAccount=a.createAccount.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(v.a)({},t,a))}},{key:"createAccount",value:function(e){console.log("Create New Account"),e.preventDefault();var t={username:this.state.username,email:this.state.email,password:this.state.password},a=this;fetch(this.props.action,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return console.log(e),e.json()}).then(function(e){"OK"===e.status?a.props.history.push({pathname:"/NewAccount",state:{msg:"You have successfully created a new account."}}):"error"===e.status?a.setState({notification:"Could not create an account successfully. Try again please. Error: "+e.error}):console.log("Unkown error: "+e.error)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("form",{className:"",onSubmit:this.createAccount},s.a.createElement("label",null,"Username:",s.a.createElement("input",{className:this.props.className,type:"text",name:"username",value:this.state.username,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Email:",s.a.createElement("input",{className:this.props.className,type:"email",name:"email",value:this.state.email,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Password:",s.a.createElement("input",{className:this.props.className,type:"text",name:"password",value:this.state.password,onChange:this.handleChange})),s.a.createElement("input",{className:"button ripple",type:"submit",value:"Create Account"})))}}]),t}(s.a.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.props.location.state.msg))}}]),t}(s.a.Component),S=Object(E.d)(j),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={username:"",password:"",notification:"",redirect:!1},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.login=a.login.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(v.a)({},t,a))}},{key:"login",value:function(e){console.log("Log in"),e.preventDefault();var t={username:this.state.username,password:this.state.password},a=this;fetch(this.props.action,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?(a.setState({redirect:!0}),a.props.history.push({pathname:"/Home",state:{skipFirstRender:!0}})):"error"===e.status?a.setState({notification:"Could not login successfully. Try again please. Error: "+e.error}):console.log("Unkown error: "+e.error)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("form",{className:"",onSubmit:this.login},s.a.createElement("label",null,"Username:",s.a.createElement("input",{className:this.props.className,type:"text",name:"username",value:this.state.username,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Password:",s.a.createElement("input",{className:this.props.className,type:"text",name:"password",value:this.state.password,onChange:this.handleChange})),s.a.createElement("input",{className:"button ripple",type:"submit",value:"Login"})))}}]),t}(s.a.Component),C=Object(E.d)(N),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={email:"",key:"",notification:""},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.verifyAccount=a.verifyAccount.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(v.a)({},t,a))}},{key:"verifyAccount",value:function(e){console.log("Verify Account"),e.preventDefault();var t={email:this.state.email,key:this.state.key},a=this;fetch(this.props.action,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?a.props.history.push({pathname:"/Verify",state:{msg:"You have successfully verified a new account."}}):"error"===e.status?a.setState({notification:"Could not verify an account successfully. Try again please. Error: "+e.error}):console.log("Unkown error: "+e.error)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("form",{className:"",onSubmit:this.verifyAccount},s.a.createElement("label",null,"Email:",s.a.createElement("input",{className:this.props.className,type:"text",name:"email",value:this.state.email,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Key:",s.a.createElement("input",{className:this.props.className,type:"text",name:"key",value:this.state.key,onChange:this.handleChange})),s.a.createElement("input",{className:"button ripple",type:"submit",value:"Verify Account"})))}}]),t}(s.a.Component),k=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log("Hi"),s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.props.location.state.msg))}}]),t}(s.a.Component),L=Object(E.d)(w),T=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getLoginStatus().then(function(t){t!==e.props.loggedIn&&e.props.setLoginState(t)}).catch(function(e){console.log("Error getting login status: "+e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(S,{action:"/adduser"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement(C,{action:"/login"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement(L,{action:"/verify"}))}}]),t}(s.a.Component),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={notification:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.action,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){var a;a="OK"===t.status?"You have successfully logged out.":"Could not logout. Error: "+t.error,e.props.setLoginState(!1,a)}).catch(function(t){console.log("Error getting logout: "+t),e.props.setLoginState(!1,"Failed to logout.")})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.props.notification))}}]),t}(s.a.Component),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={notification:"",newQuestionPage:""},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.addQuestion=a.addQuestion.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(v.a)({},t,a))}},{key:"addQuestion",value:function(e){var t,a;console.log("Add question"),e.preventDefault(),null!=this.state.tags&&""!==this.state.tags&&(t=this.state.tags.split(" ")),null!=this.state.media&&""!==this.state.media&&(a=this.state.media.split(" "));var n={title:this.state.title,body:this.state.body};null!=t&&(n.tags=t),null!=a&&(n.media=a);var s=this,i=!1,r="";fetch(this.props.action,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?(i=!0,r=e.id):(i=!1,s.setState({notification:"Could not add question. Try again please. Error: "+e.error}))}).catch(function(e){i=!1,console.log("Catch: Failed to add question. Error: "+e),s.setState({notification:"Failed to add  question. Error: "+e})}).finally(function(){i&&s.setState({newQuestionPage:r})})}},{key:"render",value:function(){var e,t=this.state.newQuestionPage;return e=null!=t&&""!==t?s.a.createElement("div",null,s.a.createElement("p",null,"Your new question can be found at"),s.a.createElement(O,{id:t,to:"/Question/"+t})):null,s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("form",{className:"",onSubmit:this.addQuestion},s.a.createElement("label",null,"Title:",s.a.createElement("input",{className:this.props.className,type:"text",name:"title",value:this.state.title,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Body:",s.a.createElement("textarea",{className:this.props.className,name:"body",value:this.state.body,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Tags (space separated):",s.a.createElement("input",{className:this.props.className,type:"text",name:"tags",value:this.state.tags,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Media IDs (space separated):",s.a.createElement("input",{className:this.props.className,type:"text",name:"media",value:this.state.media,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("input",{className:"button ripple",type:"submit",value:"Add Question"})),s.a.createElement("br",null),s.a.createElement("br",null),e)}}]),t}(s.a.Component),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={id:0,user:null,title:"",body:"",score:0,view_count:0,answer_count:0,timestamp:0,media:null,tags:null,accepted_answer_id:null,answers:null},a.refresh_visible=!1,a.answerAdded=a.answerAdded.bind(Object(o.a)(Object(o.a)(a))),a.deleteQuestion=a.deleteQuestion.bind(Object(o.a)(Object(o.a)(a))),a.refresh=a.refresh.bind(Object(o.a)(Object(o.a)(a))),a.getData=a.getData.bind(Object(o.a)(Object(o.a)(a))),a.vote=a.vote.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"answerAdded",value:function(){console.log("QuestionPage: An answer was added."),this.refresh_visible=!0,this.setState(this.state)}},{key:"refresh",value:function(){this.getData()}},{key:"getData",value:function(){var e=!1,t=this,a={},n=this.props.match.params.id;fetch("/questions/"+n,{method:"GET",credentials:"include",mode:"cors",cache:"no-cache"}).then(function(e){return e.json()}).then(function(s){return"OK"===s.status?(e=!0,a=s.question):(e=!1,t.setState({errorMessage:s.error})),fetch("/questions/"+n+"/answers",{method:"GET",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}})}).then(function(e){return e.json()}).then(function(s){console.log("Getting answers"),"OK"===s.status?(e=!0,a.answers=s.answers):(e=!1,t.setState({notification:"Could not get answers for questionId: "+n+". Error: "+s.error}))}).catch(function(a){e=!1,t.setState({notification:"Failed to get answers for question "+n+", Error: "+a}),console.log("Catch: Failed to get answers. Error: "+a)}).finally(function(){e&&t.setState(a)})}},{key:"componentDidMount",value:function(){this.getData()}},{key:"deleteQuestion",value:function(e){console.log("Delete question"),e.preventDefault();var t=this,a=!1,n=this.props.match.params.id;fetch("/questions/"+n,{method:"DELETE",credentials:"include",mode:"cors",cache:"no-cache"}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?a=!0:(a=!1,t.setState({notification:"Could not delete question. Try again please. Error: "+e.error}))}).catch(function(e){a=!1,t.setState({notification:"Failed to delete question. Error: "+e}),console.log("Failed to delete question. Error: "+e)}).finally(function(){a&&t.props.history.push("/")})}},{key:"vote",value:function(e,t){var a=this,n=!1,s={};!0===t||!1===t&&(s.upvote=!1),fetch("/questions/"+e+"/upvote",{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?n=!0:(n=!1,a.setState({notification:"Could not upvote/downvote question."}))}).catch(function(e){n=!1,a.setState({notification:"Failed to upvote/downvote question. Error: "+e}),console.log("Failed to upvote/downvote question. Error: "+e)}).finally(function(){n&&a.refresh()})}},{key:"render",value:function(){var e,t,a=this;return console.log(this.state),0!==this.state.id?(!0===this.refresh_visible?(e=s.a.createElement("button",{className:"button ripple",onClick:this.refresh},"Refresh"),this.refresh_visible=!1):e=null,null!=this.props.media&&this.props.media.length>0&&(t=this.props.media.map(function(e){return s.a.createElement("div",null,s.a.createElement("img",{src:"/media/"+e}))})),s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("form",{className:"",onSubmit:this.deleteQuestion},s.a.createElement("input",{className:"button ripple",type:"submit",value:"Delete Question"})),s.a.createElement("p",null,"Question ID: ",this.state.id),s.a.createElement("p",null,"Title: ",this.state.title),s.a.createElement("br",null),s.a.createElement("p",null,this.state.body),s.a.createElement("br",null),s.a.createElement("p",null,"Media: "),t,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,"Score: ",this.state.score),s.a.createElement("p",null,"Views: ",this.state.view_count),s.a.createElement("p",null,"Posted by: ",this.state.user.username),s.a.createElement("p",null,"Reputation: ",this.state.user.reputation),s.a.createElement("p",null,"Time Posted: ",this.state.timestamp),s.a.createElement("p",null,"Tags: ",this.state.tags),s.a.createElement("p",null,"Accepted Answer ID: ",this.state.accepted_answer_id),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,"Number of answers: ",this.state.answer_count),s.a.createElement("br",null),s.a.createElement("button",{className:"button ripple",onClick:function(){return a.vote(a.state.id,!0)}},"Upvote"),s.a.createElement("br",null),s.a.createElement("button",{className:"button ripple",onClick:function(){return a.vote(a.state.id,!1)}},"Downvote"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement("p",null,"Add answer: "),e,s.a.createElement(M,{action:"/questions/"+this.props.match.params.id+"/answers/add",callback:this.answerAdded}),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement(q,{questionId:this.props.match.params.id,answers:this.state.answers,callback:this.refresh}))):null!=this.state.errorMessage?s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.errorMessage)):(console.log("Hi"),s.a.createElement("div",null))}}]),t}(s.a.Component),q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={notification:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"acceptAnswer",value:function(e){console.log("Accept Answer ID: "+e);var t=this,a=!1;fetch("/answers/"+e+"/accept",{method:"POST",credentials:"include",mode:"cors",cache:"no-cache"}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?a=!0:(a=!1,t.setState({notification:"Could not accept answer."}))}).catch(function(e){a=!1,t.setState({notification:"Failed to accept answer. Error: "+e}),console.log("Failed to accept answer. Error: "+e)}).finally(function(){a&&t.setState({notification:"Accepted answer with ID: "+e})})}},{key:"vote",value:function(e,t){var a=this,n=!1,s={};!0===t||!1===t&&(s.upvote=!1),fetch("/answers/"+e+"/upvote",{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?n=!0:(n=!1,a.setState({notification:"Could not upvote/downvote answer."}))}).catch(function(e){n=!1,a.setState({notification:"Failed to upvote/downvote answer. Error: "+e}),console.log("Failed to upvote/downvote answer. Error: "+e)}).finally(function(){n&&a.props.callback()})}},{key:"render",value:function(){var e=this;return this.props.answers?s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),this.props.answers.map(function(t){return s.a.createElement(s.a.Fragment,null,s.a.createElement(F,{id:t.id,body:t.body,user:t.user,score:t.score,is_accepted:t.is_accepted,timestamp:t.timestamp}),s.a.createElement("br",null),s.a.createElement("button",{className:"button ripple",onClick:function(){return e.vote(t.id,!0)}},"Upvote"),s.a.createElement("br",null),s.a.createElement("button",{className:"button ripple",onClick:function(){return e.vote(t.id,!1)}},"Downvote"),s.a.createElement("br",null),s.a.createElement("button",{className:"button ripple",onClick:function(){return e.acceptAnswer(t.id)}},"Accept Answer"),s.a.createElement("br",null),s.a.createElement("hr",null))})):s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification))}}]),t}(s.a.Component),F=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t;return e=!0===this.props.is_accepted?"True":"False",null!=this.props.media&&this.props.media.length>0&&(t=this.props.media.map(function(e){return s.a.createElement("div",null,s.a.createElement("img",{src:"/media/"+e}))})),s.a.createElement("div",null,s.a.createElement("p",null,this.props.body),s.a.createElement("p",null,"Answer ID: ",this.props.id),s.a.createElement("p",null,"Username: ",this.props.user),s.a.createElement("p",null,"Score: ",this.props.score),s.a.createElement("p",null,"Accepted: ",e),s.a.createElement("p",null,"Timestamp: ",this.props.timestamp),s.a.createElement("p",null,"Media: "),t,s.a.createElement("br",null))}}]),t}(s.a.Component),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={body:""},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.addAnswer=a.addAnswer.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(v.a)({},t,a))}},{key:"addAnswer",value:function(e){var t;console.log("Add answer"),e.preventDefault(),null!=this.state.media&&""!==this.state.media&&(t=this.state.media.split(" "));var a={body:this.state.body};null!=t&&(a.media=t);var n=this,s=!1;fetch(this.props.action,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?(s=!0,e.id):s=!1}).catch(function(e){s=!1,console.log("Catch: Failed to add answer. Error: "+e)}).finally(function(){s?n.props.callback():n.setState({notification:"Could not add answer."})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("form",{className:"",onSubmit:this.addAnswer},s.a.createElement("label",null,"Answer:",s.a.createElement("textarea",{className:this.props.className,name:"body",value:this.state.body,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Media IDs (space separated):",s.a.createElement("input",{className:this.props.className,type:"text",name:"media",value:this.state.media,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("input",{className:"button ripple",type:"submit",value:"Add Answer"})))}}]),t}(s.a.Component),x=Object(E.d)(I),Q=Object(E.d)(D),U=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getLoginStatus().then(function(t){t!==e.props.loggedIn&&e.props.setLoginState(t)}).catch(function(e){console.log("Error getting login status: "+e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(x,{action:"/questions/add"}),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement("br",null))}}]),t}(s.a.Component),P=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getLoginStatus().then(function(t){t!==e.props.loggedIn&&e.props.setLoginState(t)}).catch(function(e){console.log("Error getting login status: "+e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(K,{action:this.props.action}))}}]),t}(s.a.Component),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={notification:""},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.addMedia=a.addMedia.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.files;this.setState({file:t[0]})}},{key:"addMedia",value:function(e){console.log("Add media"),e.preventDefault();var t=new FormData;t.append("content",this.state.file);var a,n=this;fetch(this.props.action,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",body:t}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?(!0,a=e.id,n.setState({notification:"Added media with ID: "+a})):(!1,n.setState({notification:"Could not add media. Try again please. Error: "+e.error}))}).catch(function(e){!1,console.log("Failed to add media. Error: "+e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("form",{className:"",onSubmit:this.addMedia},s.a.createElement("label",null,"Media:",s.a.createElement("input",{type:"file",onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("input",{className:"button ripple",type:"submit",value:"Upload Media"})))}}]),t}(s.a.Component),_=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getLoginStatus().then(function(t){t!==e.props.loggedIn&&e.props.setLoginState(t)}).catch(function(e){console.log("Error getting login status: "+e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(B,{action:"/search"}))}}]),t}(s.a.Component),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={notification:"",timestamp:"",limit:"",query:"",sort:"",tags:"",media:!1,accepted:!1,searchResults:[]},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.search=a.search.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t,a=e.target.name;t="checkbox"===e.target.type?e.target.checked:e.target.value,this.setState(Object(v.a)({},a,t))}},{key:"search",value:function(e){console.log("Search question ---------------------------------------------------"),e.preventDefault();var t={},a=this.state.timestamp;""!==a&&(t.timestamp=parseInt(a));var n=this.state.limit;""!==n&&25!==parseInt(n)&&(t.limit=parseInt(n));var s=this.state.query;""!==s&&(t.q=s);var i=this.state.sort;""!==i&&"score"!==i&&(t.sort_by=i);var r=this.state.tags;if(""!==r){var o=r.split(" ");t.tags=o.filter(function(e){return""!==e})}var l=this.state.media;!1!==l&&(t.has_media=l);var c=this.state.accepted;!1!==c&&(t.accepted=c),console.log(t);var u,h=this;fetch(this.props.action,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){"OK"===e.status?(!0,u=e.questions,h.setState({searchResults:u})):(!1,h.setState({notification:"Could not perform search. Try again please. Error: "+e.error}))}).catch(function(e){!1,h.setState({notification:"Failed to search. Error"+e}),console.log("Failed to search. Error: "+e)})}},{key:"render",value:function(){var e,t=this.state.searchResults;return t&&t.length>0&&(e=s.a.createElement("div",null,t.map(function(e){return s.a.createElement("div",null,s.a.createElement(G,{title:e.title,score:e.score,to:"/Question/"+e.id}),s.a.createElement("br",null))}))),s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("form",{className:"",onSubmit:this.search},s.a.createElement("label",null,"Search Query String:",s.a.createElement("input",{className:this.props.className,type:"text",name:"query",value:this.state.query,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Timestamp:",s.a.createElement("input",{className:this.props.className,type:"number",step:"1",name:"timestamp",value:this.state.timestamp,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Limit:",s.a.createElement("input",{className:this.props.className,type:"number",step:"1",name:"limit",value:this.state.limit,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("label",null,"Sort By:",s.a.createElement("br",null),s.a.createElement("label",null,"Score:",s.a.createElement("input",{type:"radio",name:"sort",value:"score",checked:"score"===this.state.sort,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Timestamp:",s.a.createElement("input",{type:"radio",name:"sort",value:"timestamp",checked:"timestamp"===this.state.sort,onChange:this.handleChange}))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("label",null,"Tags (space separated):",s.a.createElement("input",{className:this.props.className,type:"text",name:"tags",value:this.state.tags,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Has Media:",s.a.createElement("input",{className:this.props.className,type:"checkbox",name:"media",checked:!0===this.state.media,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Accepted:",s.a.createElement("input",{className:this.props.className,type:"checkbox",name:"accepted",checked:!0===this.state.accepted,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("input",{className:"button ripple",type:"submit",name:"SearchButton",value:"Search"})),s.a.createElement("br",null),s.a.createElement("hr",null),e)}}]),t}(s.a.Component),G=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(p.b,{className:this.props.className,to:this.props.to},this.props.title),s.a.createElement("p",null,"Score: ",this.props.score))}}]),t}(s.a.Component),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={notification:""},a.handleChange=a.handleChange.bind(Object(o.a)(Object(o.a)(a))),a.getUser=a.getUser.bind(Object(o.a)(Object(o.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getLoginStatus().then(function(t){t!==e.props.loggedIn&&e.props.setLoginState(t)}).catch(function(e){console.log("Error getting login status: "+e)})}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(v.a)({},t,a))}},{key:"getUser",value:function(e){console.log("Get User"),e.preventDefault(),null!=this.state.username&&""!==this.state.username&&this.props.history.push("/User/"+this.state.username)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("p",null,"Find a user by typing in their username."),s.a.createElement("form",{className:"",onSubmit:this.getUser},s.a.createElement("label",null,"Username:",s.a.createElement("input",{className:this.props.className,type:"text",name:"username",value:this.state.username,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("input",{className:"button ripple",type:"submit",value:"Find User"})))}}]),t}(s.a.Component),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.username,a={};this.props.getLoginStatus().then(function(t){t!==e.props.loggedIn&&e.props.setLoginState(t)}).catch(function(e){console.log("Error getting login status: "+e)}),fetch("/user/"+t,{method:"GET",credentials:"include",mode:"cors",cache:"no-cache"}).then(function(e){return e.json()}).then(function(n){return"OK"===n.status?(a.email=n.user.email,a.reputation=n.user.reputation):e.setState({notification:"Unable to get user with username: "+t}),fetch("/user/"+t+"/questions",{method:"GET",credentials:"include",mode:"cors",cache:"no-cache"})}).then(function(e){return e.json()}).then(function(n){return"OK"===n.status?a.questions=n.questions:e.setState({notification:"Unable to get the questions of user: "+t}),fetch("/user/"+t+"/answers",{method:"GET",credentials:"include",mode:"cors",cache:"no-cache"})}).then(function(e){return e.json()}).then(function(n){"OK"===n.status?a.answers=n.answers:e.setState({notification:"Unable to get the answers of user: "+t})}).catch(function(e){console.log("Failed to fetch part or all of user profile with username: "+t+", Error: "+e)}).finally(function(){e.setState(a)})}},{key:"render",value:function(){var e,t,a,n=this.props.match.params.username,i=this.state.questions,r=this.state.answers;return e=this.state.email&&this.state.reputation?s.a.createElement("div",null,s.a.createElement("p",null,"Username: ",n),s.a.createElement("p",null,"Reputation: ",this.state.reputation),s.a.createElement("p",null,"Email: ",this.state.email)):s.a.createElement(s.a.Fragment,null),t=null!=i&&i.length>0?s.a.createElement("div",null,i.map(function(e){return s.a.createElement("div",null,s.a.createElement(O,{id:e,to:"/Question/"+e}),s.a.createElement("br",null))})):s.a.createElement(s.a.Fragment,null),a=null!=r&&r.length>0?s.a.createElement("div",null,r.map(function(e){return s.a.createElement("div",null,s.a.createElement("p",null,e))})):s.a.createElement(s.a.Fragment,null),s.a.createElement("div",null,s.a.createElement("p",{className:"Notification"},this.state.notification),s.a.createElement("h1",null,"User Profile"),s.a.createElement("br",null),e,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,"Questions posted by user"),t,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,"Answers posted by user"),a)}}]),t}(s.a.Component),H=Object(E.d)(J),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).setLoginState=a.setLoginState.bind(Object(o.a)(Object(o.a)(a))),a.getLoginStatus=a.getLoginStatus.bind(Object(o.a)(Object(o.a)(a))),a.state={loggedIn:!1,notification:""},a.justChanged=!1,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"setLoginState",value:function(e,t){this.setState({loggedIn:e,notification:t})}},{key:"getLoginStatus",value:function(){console.log("get login status was called");var e=this;return fetch("/CheckLoginStatus",{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){return e.state.loggedIn!==t.loggedIn&&(e.justChanged=!0,e.setState({loggedIn:t.loggedIn})),!0===t.loggedIn}).catch(function(e){return console.log("Failed to find out if you are logged in: "+e),!1})}},{key:"render",value:function(){var e=this,t=this.state.loggedIn;return s.a.createElement(s.a.Fragment,null,s.a.createElement(d,{loggedIn:t}),s.a.createElement(E.a,{exact:!0,path:"/",render:function(a){return s.a.createElement(f,Object.assign({},a,{loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/Search",render:function(a){return s.a.createElement(_,Object.assign({},a,{action:"/search",loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/NewAccount",render:function(a){return s.a.createElement(y,Object.assign({},a,{loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/Login",render:function(a){return s.a.createElement(T,Object.assign({},a,{loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/Logout",render:function(a){return s.a.createElement(A,Object.assign({},a,{action:"/logout",notification:e.state.notification,loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/Verify",component:k}),s.a.createElement(E.a,{path:"/Questions",render:function(a){return s.a.createElement(U,Object.assign({},a,{notification:e.state.notification,loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/Question/:id",render:function(a){return s.a.createElement(Q,Object.assign({},a,{notification:e.state.notification,loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/Media",render:function(a){return s.a.createElement(P,Object.assign({},a,{action:"/addmedia",notification:e.state.notification,loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/Users",render:function(a){return s.a.createElement(H,Object.assign({},a,{notification:e.state.notification,loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}),s.a.createElement(E.a,{path:"/User/:username",render:function(a){return s.a.createElement(R,Object.assign({},a,{notification:e.state.notification,loggedIn:t,getLoginStatus:e.getLoginStatus,setLoginState:e.setLoginState}))}}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(p.a,null,s.a.createElement("div",null,s.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.1d1a74af.chunk.js.map